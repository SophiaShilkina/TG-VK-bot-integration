from vk_api.longpoll import VkLongPoll, VkEventType

from msg import *
from vksession import vk_session
from keyboards import *
from updates import *
from actionsdb import *
from vksession import bot
from callbacks import callback_operations
from sett import CHAT_ID

longpoll = VkLongPoll(vk_session)


async def message_handler(idu, message_text, event):
    userAct = "0"
    while_blok = 0

    await checking_user_in_database(idu)

    # –ù–∞—á–∞–ª–æ —Å–µ–∞–Ω—Å–∞
    if message_text == '–Ω–∞—á–∞—Ç—å' or message_text == 'start':
        print(f"–ù–∞—á–∏–Ω–∞—é —Å–µ—Å—Å–∏—é —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {idu}")
        await write_msg(idu,
                  '–ü—Ä–∏–≤–µ—Ç!üíô\n–Ø —á–∞—Ç-–±–æ—Ç –≤–∞—à–µ–≥–æ –ª—é–±–∏–º–æ–≥–æ —Ö–æ—Å—Ç–µ–ª–∞. –†–∞–¥ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –≤–∞–º–∏ —Å–µ–≥–æ–¥–Ω—è.')
        await write_msg(idu,
                  '–î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑—É–µ–º –≤–∞—à–µ –∏–¥–µ–∞–ª—å–Ω–æ–µ –ø—Ä–µ–±—ã–≤–∞–Ω–∏–µ –≤ –Ω–∞—à–µ–º —É—é—Ç–Ω–æ–º —Ö–æ—Å—Ç–µ–ª–µ '
                  '–≤—Å–µ–≥–æ –∑–∞ 4‚É£ —à–∞–≥–∞.')
        await write_msg(idu,
                  '1‚É£ –î–ª—è –Ω–∞—á–∞–ª–∞, —Å–∫–∞–∂–∏—Ç–µ –º–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤ –∫–∞–∫–∏–µ –¥–∞—Ç—ã –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —É –Ω–∞—Å '
                  '–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è?\n\n'
                  'üìÜ –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n\n‚ùó–¥–¥.–º–º.–≥–≥ ‚Äì –¥–¥.–º–º.–≥–≥‚ùó\n\n'
                  ', –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –≥–¥–µ –ø–µ—Ä–≤–∞—è –¥–∞—Ç–∞ ‚Äì  –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è –¥–ª—è –∑–∞–µ–∑–¥–∞, –≤—Ç–æ—Ä–∞—è ‚Äì '
                  '–¥–ª—è –≤—ã–µ–∑–¥–∞.')

        userAct = "data"
        userAct = await saving_between_responses(idu, userAct)

    if userAct == "data":
        await write_msg(idu, '2‚É£ –û—Ç–ª–∏—á–Ω–æ, —Å–∫–æ–ª—å–∫–æ –≥–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –≤ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏? üëî\n\n'
                                 '‚ùó–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ‚ùó\n\n'
                                 '–ü—Ä–æ—Å–∏–º –æ–±—Ä–∞—Ç–∏—Ç—å –≤–∞—à–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø—Ä–æ–∂–∏–≤–∞—Ç—å –≤ –Ω–∞—à–µ–º —Ö–æ—Å—Ç–µ–ª–µ –º–æ–≥—É—Ç '
                                 '—Ç–æ–ª—å–∫–æ –¥–µ—Ç–∏ –≤–æ–∑—Ä–∞—Å—Ç–æ–º –Ω–∞—á–∏–Ω–∞—è üìå–æ—Ç 14 –ª–µ—Çüìå –∏ —Å—Ç–∞—Ä—à–µ.')

        userAct = "persons"
        await saving_between_responses(idu, userAct)

    if userAct == "persons":
        await write_msg(idu, '3‚É£ –°–∫–∞–∂–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º—É–∂—á–∏–Ω –∏ –∂–µ–Ω—â–∏–Ω –≤ –≤–∞—à–µ–π '
                                 '–≥—Ä—É–ø–ø–µ?\n\nüë´ –£–∫–∞–∂–∏—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n\n‚ùó–ß–∏—Å–ª–æ –º—É–∂—á–∏–Ω / —á–∏—Å–ª–æ –∂–µ–Ω—â–∏–Ω‚ùó\n\n'
                                 ', –Ω–∞–ø—Ä–∏–º–µ—Ä, 4 –º—É–∂—á–∏–Ω/2 –∂–µ–Ω—â–∏–Ω. –ï—Å–ª–∏ –ø–µ—Ä—Å–æ–Ω –∫–∞–∫–æ–≥–æ-—Ç–æ –ø–æ–ª–∞ –Ω–µ '
                                 '–∑–∞–µ–∑–∂–∞–µ—Ç, —É–∫–∞–∂–∏—Ç–µ 0.')

        userAct = "gender"
        await saving_between_responses(idu, userAct)

    if userAct == "gender":
        await write_msg_with_photo(idu, '4‚É£ –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ –≤—ã–±–æ—Ä–µ –∫–æ–º–Ω–∞—Ç—ã? –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –í–∞–º '
                                    '–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ —Å–ø–∏—Å–∫–æ–º –∏ –ø—Ä–∞–π—Å–æ–º.\n\nüè° –í—ã–±—Ä–∞–Ω–Ω—ã–µ –í–∞–º–∏ –∂–µ–ª–∞–µ–º—ã–µ '
                                    '–∫–æ–º–Ω–∞—Ç—ã —É–∫–∞–∂–∏—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, ‚ùó–∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑–∞–Ω –≤ —Å–ø–∏—Å–∫–µ, –±–µ–∑ '
                                    '–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞–≥–ª–∞–≤–Ω—ã—Ö –±—É–∫–≤ (Caps Lock)‚ùó\n\n, –Ω–∞–ø—Ä–∏–º–µ—Ä, 4-–µ—Ö '
                                    '–∂–µ–Ω—Å–∫–∏–π. –ù–∞–ø–∏—à–∏—Ç–µ, "–∂–µ–ª–∞–µ–º—ã—Ö –∫–æ–º–Ω–∞—Ç –Ω–µ—Ç", –µ—Å–ª–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π '
                                    '–Ω–µ –∏–º–µ–µ—Ç—Å—è.')

        userAct = "room"
        await saving_between_responses(idu, userAct)

        userAct = "wait"
        await changing_act(idu, userAct)

    if userAct == "wait":
        while userAct != "exit":
            while while_blok != 1:
                await write_msg(idu, await presentation_of_information(idu), keyboard)
                while_blok += 1

            async def history_while():
                await asyncio.sleep(1)
                user_message_received = vk_ms.messages.getHistory(user_id=idu, count=1)['items'][0]['text']
                return user_message_received

            if await history_while() == '–í—Å–µ –≤–µ—Ä–Ω–æ':
                userAct = "exit"
            elif await history_while() == 'üìÜ –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—ã':
                userAct = "data"
            elif await history_while() == 'üëî –ò–∑–º–µ–Ω–∏—Ç—å —á–∏—Å–ª–æ –ø–µ—Ä—Å–æ–Ω':
                userAct = "persons"
            elif await history_while() == 'üë´ –ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ':
                userAct = "gender"
            elif await history_while() == 'üè° –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–º–Ω–∞—Ç—ã':
                userAct = "room"

            if userAct == "data":
                await write_msg(idu, '–•–æ—Ä–æ—à–æ, –≤–≤–µ–¥–∏—Ç–µ –≤–µ—Ä–Ω—ã–µ –¥–∞—Ç—ã, —Å–æ–±–ª—é–¥–∞—è –¥–∞–Ω–Ω—ã–π '
                                         '—Ñ–æ—Ä–º–∞—Ç:\n\n‚ùó–¥–¥.–º–º.–≥–≥ ‚Äì –¥–¥.–º–º.–≥–≥‚ùó')
                await saving_between_responses(idu, userAct)
                userAct = "confirm"
                await changing_act(idu, userAct)
                while_blok = 0

            if userAct == "persons":
                await write_msg(idu, '–•–æ—Ä–æ—à–æ, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–∏—Å–ª–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä–æ–µ '
                                         '–¥–æ–ª–∂–Ω–æ –∑–∞–µ—Ö–∞—Ç—å.')
                await saving_between_responses(idu, userAct)
                userAct = "gender"
                await changing_act(idu, userAct)

                await write_msg(event.user_id,
                          '–•–æ—Ä–æ—à–æ, –≤–≤–µ–¥–∏—Ç–µ –≤–µ—Ä–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ, —Å–æ–±–ª—é–¥–∞—è –¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç'
                          ' –∏ –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞:\n\n‚ùó–ß–∏—Å–ª–æ –º—É–∂—á–∏–Ω / —á–∏—Å–ª–æ –∂–µ–Ω—â–∏–Ω‚ùó')
                await saving_between_responses(idu, userAct)
                userAct = "confirm"
                await changing_act(idu, userAct)
                while_blok = 0

            elif userAct == "gender":
                await write_msg(event.user_id,
                          '–•–æ—Ä–æ—à–æ, –≤–≤–µ–¥–∏—Ç–µ –≤–µ—Ä–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ, —Å–æ–±–ª—é–¥–∞—è –¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ '
                          '–∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞:\n\n‚ùó–ß–∏—Å–ª–æ –º—É–∂—á–∏–Ω / —á–∏—Å–ª–æ –∂–µ–Ω—â–∏–Ω‚ùó')
                await saving_between_responses(idu, userAct)
                userAct = "confirm"
                await changing_act(idu, userAct)
                while_blok = 0

            elif userAct == "room":
                await write_msg_with_photo(idu,
                                           '–•–æ—Ä–æ—à–æ, –≤–≤–µ–¥–∏—Ç–µ –≤–µ—Ä–Ω—É—é –∫–æ–º–Ω–∞—Ç—É (–≤–µ—Ä–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã), –≤ '
                                           '–∫–æ—Ç–æ—Ä–æ–π –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏ –ø—Ä–æ–∂–∏–≤–∞—Ç—å –≤ –Ω–∞—à–µ–º —Ö–æ—Å—Ç–µ–ª–µ.')
                await saving_between_responses(idu, userAct)
                userAct = "confirm"
                await changing_act(idu, userAct)
                while_blok = 0

    if message_text == '–≤—Å–µ –≤–µ—Ä–Ω–æ':
        userAct = "go"
        await changing_act(idu, userAct)

        await write_msg(idu,
                  '–ü—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –≤ –Ω–∞—à–µ–º —Ö–æ—Å—Ç–µ–ª–µ, –º—ã —Ö–æ—Ç–µ–ª–∏ –±—ã '
                  '–æ–±—Ä–∞—Ç–∏—Ç—å –≤–∞—à–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±–ª—é–¥–∞—Ç—å –≤–æ –≤—Ä–µ–º—è '
                  '–≤–∞—à–µ–≥–æ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è.\n\n‚úÖ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è '
                  '–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å–≤–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ.')
        await write_msg(idu,
                  'üåé –ü–†–ê–í–ò–õ–ê –í–ù–£–¢–†–ï–ù–ù–ï–ì–û –†–ê–°–ü–û–†–Ø–î–ö–ê ¬´–ö–†–ò–°–¢–û–§–ï–† –•–û–°–¢–ï–õ¬ª üåé\n\n1‚É£  –ß–∏—Å—Ç–æ—Ç–∞ –∏ '
                  '–ø–æ—Ä—è–¥–æ–∫!\n‚Ä¢ –£–±–∏—Ä–∞—Ç—å –∏ –º—ã—Ç—å –∑–∞ —Å–æ–±–æ–π –ø–æ—Å—É–¥—É –∏ –∫—É—Ö–æ–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏;\n‚Ä¢ '
                  '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö;\n‚Ä¢ –ù–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ –ª–∏—á–Ω—ã–µ –≤–µ—â–∏ –≤ –º–µ—Å—Ç–∞—Ö –æ–±—â–µ–≥–æ '
                  '–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è;\n ‚Ä¢ –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏ –Ω–µ —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö.\n2‚É£  '
                  '–£–≤–∞–∂–µ–Ω–∏–µ!\n‚Ä¢ –°–æ–±–ª—é–¥–∞—Ç—å —Ä–µ–∂–∏–º —Ç–∏—à–∏–Ω—ã —Å 24:00 –¥–æ 07:00;\n‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∏—Ä–∞–ª—å–Ω—É—é '
                  '–º–∞—à–∏–Ω—É —Å 09:00 –¥–æ 21:00.\n\nüö´ –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò –ó–ê–ü–†–ï–©–ï–ù–û üö´\n‚Ä¢ –ö—É—Ä–µ–Ω–∏–µ, —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ'
                  ' –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Ä–∫–æ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–µ—â–µ—Å—Ç–≤, —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è - –≤—ã—Å–µ–ª–µ–Ω–∏–µ;\n‚Ä¢ '
                  '–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–µ—Å—Å–∏–∏ –∏ –≤—Å–µ—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–∞—Å–∏–ª–∏—è –∫ –æ–∫—Ä—É–∂–∞—é—â–∏–º;\n‚Ä¢ –•—Ä–∞–Ω–µ–Ω–∏–µ –≤–∑—Ä—ã–≤—á–∞—Ç—ã—Ö '
                  '–∏ –ª–µ–≥–∫–æ –≤–æ—Å–ø–ª–∞–º–µ–Ω—è—é—â–∏—Ö—Å—è –≤–µ—â–µ—Å—Ç–≤, –æ—Ä—É–∂–∏—è, –Ω–∞—Ä–∫–æ—Ç–∏–∫–æ–≤, —Ä—Ç—É—Ç–∏, —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö –∏ '
                  '—Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤;\n‚Ä¢ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é '
                  '—Ö–æ—Å—Ç–µ–ª–∞ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –≥–æ—Å—Ç–µ–π, –ø—Ä–æ–¥–∞–∂–∞ —Å–≤–æ–∏—Ö —É—Å–ª—É–≥ –∏–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤.\n\n‚è∞ –ü–†–ê–í–ò–õ–ê –ó–ê–ï–ó–î–ê –ò '
                  '–í–´–ï–ó–î–ê ‚è∞\n‚Ä¢ –ó–∞–µ–∑–¥ –≤–æ–∑–º–æ–∂–µ–Ω –ø–æ—Å–ª–µ 13:00, –≤—ã–µ–∑–¥ –≤ 12:00;\n‚Ä¢ –†–∞–Ω–Ω–µ–µ –∑–∞—Å–µ–ª–µ–Ω–∏–µ –∏–ª–∏ '
                  '–ø–æ–∑–¥–Ω–∏–π –≤—ã–µ–∑–¥ –≤–æ–∑–º–æ–∂–Ω—ã‚úÖ, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç. –°—Ç–æ–∏—Ç —É—á–µ—Å—Ç—å, —á—Ç–æ —É—Å–ª—É–≥–∞ '
                  '–æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø–ª–∞—Ç—É;\n‚Ä¢ –í —Å–ª—É—á–∞–µ –≤—ã–µ–∑–¥–∞ —Ä–∞–Ω—å—à–µ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–π '
                  '–¥–∞—Ç—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, –≤–Ω–µ—Å–µ–Ω–Ω—ã–µ –∑–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ;\n‚Ä¢ '
                  '–ì–æ—Å—Ç—å –æ–±—è–∑–∞–Ω –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏. –í —Å–ª—É—á–∞–µ –Ω–µ–æ–ø–ª–∞—Ç—ã –¥–æ 12:00, '
                  '–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ø—Ä–∞–≤–µ –∑–∞—Å–µ–ª–∏—Ç—å –¥—Ä—É–≥–æ–≥–æ –≥–æ—Å—Ç—è.\n\n–ù–∞–º –±—É–¥–µ—Ç –æ—á–µ–Ω—å –∂–∞–ª—å, –Ω–æ —Ä–∞–¥–∏ '
                  '–¥—É—à–µ–≤–Ω–æ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è –Ω–∞—à–∏—Ö –≥–æ—Å—Ç–µ–π –∏ –∫–æ–Ω–µ—á–Ω–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ —Ö–æ—Å—Ç–µ–ª–∞, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è '
                  '–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –Ω–∞ –≤—ã—Å–µ–ª–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞—é—â–µ–≥–æ –≤ —Å–ª—É—á–∞–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è '
                  '–æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∏ –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è, –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤.',
                  keyboard2)
        user_get = vk_ms.users.get(user_ids=event.user_id)
        fullname = user_get[0]['first_name'] + ' ' + user_get[0]['last_name']
        await get_user_name(idu, fullname)

    elif message_text == '–ø—Ä–æ—á–∏—Ç–∞–ª(–∞) –∏ –ø—Ä–∏–Ω–∏–º–∞—é –ø—Ä–∞–≤–∏–ª–∞':
        await write_msg(event.user_id,
                  '–Ø –æ—Ç–ø—Ä–∞–≤–∏–ª —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–≤–æ–∏–º –∫–æ–ª–ª–µ–≥–∞–º. '
                  '–û–Ω–∞ –ø–æ–º–æ–∂–µ—Ç –∏–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥–ª—è –≤–∞—Å —Å–∞–º—ã–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.')
        await write_msg(event.user_id,
                  '–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞—è–≤–∫—É:\n\n'
                  '‚è∞ –í–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è –æ—Ç 2 –¥–æ 15 –º–∏–Ω—É—Ç –≤ –¥–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è.\n\n'
                  '–ü–æ—Å–ª–µ, –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –≤ —á–∞—Ç, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –≤–∞—à–µ–π –ø–æ–µ–∑–¥–∫–∏.')

        message_1 = await information_to_admin(idu)
        print(message_1)

        if message_1 != 0:
            print(11)
            await callback_operations(idu, message_1)
            message_1 = ""

    elif message_text == '–ø–æ–∑–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞':
        bot.send_message(chat_id=CHAT_ID,
                         text=f'–ì–æ—Å—Ç—å <b>{return_user_name(idu)}</b> '
                              f'–ø—Ä–æ—Å–∏—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –≤ —á–∞—Ç.\n\n'
                              f'<a href="https://vk.com/gim226206756?sel={idu}">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è '
                              f'–≤ —á–∞—Ç</a>',
                         parse_mode='html')
        await write_msg(idu, '–ù–∞–ø—Ä–∞–≤–∏–ª –í–∞—à—É –ø—Ä–æ—Å—å–±—É –∫–æ–ª–ª–µ–≥–∞–º, –æ–∂–∏–¥–∞–π—Ç–µ ‚è∞')


# –ì–ª–∞–≤–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ü–∏–∫–ª
async def main_loop():
    while True:
        for event in longpoll.listen():
            if event.type == VkEventType.MESSAGE_NEW and event.to_me:
                idu = event.user_id
                message_text = event.text.lower()
                await message_handler(idu, message_text, event)
